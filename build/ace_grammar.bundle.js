/**
*
*   Classy.js
*   @version: 0.7.5
*
*   Object-Oriented micro-framework for JavaScript
*   https://github.com/foo123/classy.js
*
**/!function(e,n,t){"use strict";var r,i="object"==typeof module&&module.exports,u="function"==typeof define&&define.amd;i?module.exports=(module.$deps=module.$deps||{})[n]=module.$deps[n]||t.call(e,{NODE:module})||1:u&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["require","exports","module"],function(n,r,i){return t.call(e,{AMD:i})}):n in e||(e[n]=r=t.call(e,{})||1)&&u&&define(n,[],function(){return r})}(this,"Classy",function(e){return!function(e,n){"use strict";var t="constructor",r="prototype",i="__proto__",u="__static__",l=String,a=Number,o=RegExp,s=Array,c=s[r],f=Object,b=f[r],p=Function,d=p[r],m=d.call.bind(c.slice),g=d.call.bind(b.toString),v=d.call.bind(b.hasOwnProperty),h=d.call.bind(b.propertyIsEnumerable),y=f.keys,x=f.defineProperty,$=function(e,n){return e instanceof n},w=function(e){return typeof e},j=function(e){throw new TypeError(e)},E=2,_=3,O=4,C=8,N=9,q=16,A=32,I=64,M=128,S=256,P=512,R=1024,D=function(e){var t,r;return null===e?S:!0===e||!1===e?O:(t=w(e),r=g(e),n===e||"undefined"===t?P:$(e,a)||"number"===t?isNaN(e)?_:E:$(e,l)||"string"===t?1===e.length?N:C:$(e,s)||"[object Array]"===r?q:$(e,o)||"[object RegExp]"===r?M:$(e,p)||"function"===t&&"[object Function]"===r?I:"[object Object]"===r?A:R)},F=function(e,n){var t,r=n.length,i=[].concat(e);for(t=0;r>t;t++)i.indexOf(n[t])>-1||i.push(n[t]);return i},T=function(e,n){A!==D(e)&&j("bad desc");var t={};if(v(e,"enumerable")&&(t.enumerable=!!n.enumerable),v(e,"configurable")&&(t.configurable=!!n.configurable),v(e,"value")&&(t.value=n.value),v(e,"writable")&&(t.writable=!!e.writable),v(e,"get")){var r=e.get;I!==D(r)&&"undefined"!==r&&j("bad get"),t.get=r}if(v(e,"set")){var i=e.set;I!==D(i)&&"undefined"!==i&&j("bad set"),t.set=i}return("get"in t||"set"in t)&&("value"in t||"writable"in t)&&j("identity-confused descriptor"),t},k=f.defineProperties||function(e,n){("object"!==w(e)||null===e)&&j("bad obj"),n=f(n);for(var t=y(n),r=[],i=0;i<t.length;i++)r.push([t[i],T(n[t[i]],e)]);for(var i=0;i<r.length;i++)x(e,r[i][0],r[i][1]);return e},V=f.create||function(e,n){var t,u=function(){};return u[r]=e,t=new u,t[i]=e,"object"===w(n)&&k(t,n),t},z=function(e){function n(r){var i,u=arguments.length-1;return this.$super=t,i=u?e[r].apply(this,m(arguments,1)):e[r].call(this),this.$super=n,i}var t=e.$super||function(){};return n},B=function(e){function n(r,i){var u,l=i?i.length:0;return this.$superv=t,u=l?e[r].apply(this,i):e[r].call(this),this.$superv=n,u}var t=e.$superv||function(){};return n},G=function(){var e,n,t,r,i,u,l,a=m(arguments);for(n=a.shift()||{},e=a.length,u=0;e>u;u++)if(t=a[u],A===D(t))for(i in t)v(t,i)&&h(t,i)&&(r=t[i],l=D(r),n[i]=E&l?0+r:(C|q)&l?r.slice(0):r);return n},H=function(e,n,r){var i,u,l=!!n;if(l||r)if(i={},n=l?n+"$":n,r&&I===D(r))for(u in e)t!==u?(l&&I===D(e[u])&&(i[n+u]=e[u]),i[r(u,e[u])]=e[u]):i[u]=e[u];else for(u in e)t!==u?(l&&I===D(e[u])&&(i[n+u]=e[u]),r&&u in r?i[r[u]]=e[u]:i[u]=e[u]):i[u]=e[u];else i=e;return i},J=function(e,i,l,a){e=e||f,i=i||{};var o,s,c,b,p,d,m,g,h=null,x=e.$static||null,$=e[r];if(v(i,t)?s=i[t]:(o=function(){},i[t]=s=o),v(i,u)&&(h=i[u],delete i[u],x=F(x||[],y(h))),s[r]=H(V($),l,a),s[r]=G(s[r],i),k(s[r],{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0},$class:{value:s,enumerable:!1,writable:!0,configurable:!0},$superv:{value:B($),enumerable:!1,writable:!0,configurable:!0},$super:{value:z($),enumerable:!1,writable:!0,configurable:!0}}),k(s,{$super:{value:e,enumerable:!1,writable:!0,configurable:!0},$static:{value:x,enumerable:!1,writable:!0,configurable:!0}}),x){for(b=x.length,p={},c=0;b>c;c++)d=x[c],m=null,h&&n!==h[d]?m=h[d]:n!==e[d]&&(g=D(e[d]),m=A===g?G(null,e[d]):(C|q)&g?e[d].slice(0):E&g?0+e[d]:e[d]),p[d]={value:m,enumerable:!1,writable:!0,configurable:!0};k(s,p)}return s},K=G,L=G,Q=function(){var e=m(arguments),n=e.length,t=null;if(n>=2){var i=D(e[0]);i=I===i?{Extends:e[0]}:A===i?e[0]:{Extends:f};var u,l,a=e[1]||{},o={},s=i.Extends||i.extends||f,c=i.Implements||i.implements,b=i.Mixin||i.mixin,p=null;if(c=c?[].concat(c):null,b=b?[].concat(b):null)for(u=0,l=b.length;l>u;u++)A===D(b[u])?b[u].mixin&&b[u].mixin[r]&&(p=H(b[u].mixin[r],b[u].namespace||null,b[u].as||null),o=L(o,p)):b[u][r]&&(p=b[u][r],o=L(o,p));if(c)for(u=0,l=c.length;l>u;u++)A===D(c[u])?c[u].implements&&c[u].implements[r]&&(p=H(c[u].implements[r],c[u].namespace||null,c[u].as||null),o=K(o,p)):c[u][r]&&(p=c[u][r],o=K(o,p));t=A===D(s)?J(s.extends||f,G(o,a),s.namespace||null,s.as||null):J(s,G(o,a))}else t=J(f,e[0]);return t};e.Classy={VERSION:"0.7.5",Type:D,Create:V,Merge:G,Alias:H,Implements:K,Mixin:L,Extends:J,Static:function(e){return e},Class:Q}}(e),e.Classy});
/**
*
*   RegExAnalyzer
*   @version: 0.3.2
*
*   A simple Regular Expression Analyzer in JavaScript
*   https://github.com/foo123/regex-analyzer
*
**/!function(t,e,r){"use strict";var a,s="object"==typeof module&&module.exports,p="function"==typeof define&&define.amd;s?module.exports=(module.$deps=module.$deps||{})[e]=module.$deps[e]||r.call(t,{NODE:module})||1:p&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(e)?define(e,["require","exports","module"],function(e,a,s){return r.call(t,{AMD:s})}):e in t||(t[e]=a=r.call(t,{})||1)&&p&&define(e,[],function(){return a})}(this,"RegExAnalyzer",function(t){return function(t){var e="\\",r=/^\{\s*(\d+)\s*,?\s*(\d+)?\s*\}/,a=/^u([0-9a-fA-F]{4})/,s=/^x([0-9a-fA-F]{2})/,p={".":"MatchAnyChar","|":"MatchEither","?":"MatchZeroOrOne","*":"MatchZeroOrMore","+":"MatchOneOrMore","^":"MatchStart",$:"MatchEnd","{":"StartRepeats","}":"EndRepeats","(":"StartGroup",")":"EndGroup","[":"StartCharGroup","]":"EndCharGroup"},h={"\\":"EscapeChar","/":"/",0:"NULChar",f:"FormFeed",n:"LineFeed",r:"CarriageReturn",t:"HorizontalTab",v:"VerticalTab",b:"MatchWordBoundary",B:"MatchNonWordBoundary",s:"MatchSpaceChar",S:"MatchNonSpaceChar",w:"MatchWordChar",W:"MatchNonWordChar",d:"MatchDigitChar",D:"MatchNonDigitChar"},i=Object.prototype.toString,n=function(t,e){if(e&&(e instanceof Array||"[object Array]"==i.call(e)))for(var r=0,a=e.length;a>r;r++)t[e[r]]=1;else for(var r in e)t[r]=1;return t},g=function(t,e){t&&(t instanceof Array||"[object Array]"==i.call(t))&&(e=t[1],t=t[0]);var r,a,s=t.charCodeAt(0),p=e.charCodeAt(0);if(p==s)return[String.fromCharCode(s)];for(a=[],r=s;p>=r;++r)a.push(String.fromCharCode(r));return a},l=function(t){var e,r,a,s,p,h,i,o,u={},f={};if(i=t.type,"Alternation"==i)for(a=0,s=t.part.length;s>a;a++)p=l(t.part[a]),u=n(u,p.peek),f=n(f,p.negativepeek);else if("Group"==i)p=l(t.part),u=n(u,p.peek),f=n(f,p.negativepeek);else if("Sequence"==i){for(a=0,s=t.part.length,r=t.part[a],h=a>=s||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;!h;)p=l(r.part),u=n(u,p.peek),f=n(f,p.negativepeek),a++,r=t.part[a],h=a>=s||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;s>a&&(r=t.part[a],"Special"!=r.type||"^"!=r.part&&"$"!=r.part||(r=t.part[a+1]||null),r&&"Quantifier"==r.type&&(r=r.part),r&&(p=l(r),u=n(u,p.peek),f=n(f,p.negativepeek)))}else if("CharGroup"==i)for(e=t.flags.NotMatch?f:u,a=0,s=t.part.length;s>a;a++)r=t.part[a],o=r.type,"Chars"==o?e=n(e,r.part):"CharRange"==o?e=n(e,g(r.part)):"UnicodeChar"==o||"HexChar"==o?e[r.flags.Char]=1:"Special"==o&&("D"==r.part?t.flags.NotMatch?u["\\d"]=1:f["\\d"]=1:"W"==r.part?t.flags.NotMatch?u["\\w"]=1:f["\\W"]=1:"S"==r.part?t.flags.NotMatch?u["\\s"]=1:f["\\s"]=1:e["\\"+r.part]=1);else"String"==i?u[t.part.charAt(0)]=1:"Special"!=i||t.flags.MatchStart||t.flags.MatchEnd?("UnicodeChar"==i||"HexChar"==i)&&(u[t.flags.Char]=1):"D"==t.part?f["\\d"]=1:"W"==t.part?f["\\W"]=1:"S"==t.part?f["\\s"]=1:u["\\"+t.part]=1;return{peek:u,negativepeek:f}},o=function(t,e){t&&this.setRegex(t,e)};o.VERSION="0.3.2",o.getCharRange=g,o.prototype={constructor:o,VERSION:o.VERSION,regex:null,groupIndex:null,pos:null,flags:null,parts:null,getCharRange:o.getCharRange,getPeekChars:function(){var t,e,r,a,s=this.flags&&this.flags.i,h=l(this.parts);for(t in h){a={},r=h[t];for(e in r)"\\d"==e?(delete r[e],a=n(a,g("0","9"))):"\\s"==e?(delete r[e],a=n(a,["\f","\n","\r","	","","Â ","\u2028","\u2029"])):"\\w"==e?(delete r[e],a=n(a,["_"].concat(g("0","9")).concat(g("a","z")).concat(g("A","Z")))):"\\."==e?(delete r[e],a[p["."]]=1):"\\"!=e.charAt(0)&&s?(a[e.toLowerCase()]=1,a[e.toUpperCase()]=1):"\\"==e.charAt(0)&&delete r[e];h[t]=n(r,a)}return h},setRegex:function(t,e){if(t){this.flags={},e=e||"/";for(var r=t.toString(),a=r.length,s=r.charAt(a-1);e!=s;)this.flags[s]=1,r=r.substr(0,a-1),a=r.length,s=r.charAt(a-1);e==r.charAt(0)&&e==r.charAt(a-1)&&(r=r.substr(1,a-2)),this.regex=r}return this},analyze:function(){var t,i,n,g="",l=[],o=[],u=!1;for(this.pos=0,this.groupIndex=0;this.pos<this.regex.length;)if(t=this.regex.charAt(this.pos++),u=e==t?!0:!1,u&&(t=this.regex.charAt(this.pos++)),u)"u"==t?(g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),n=a.exec(this.regex.substr(this.pos-1)),this.pos+=n[0].length-1,o.push({part:n[0],flags:{Char:String.fromCharCode(parseInt(n[1],16)),Code:n[1]},type:"UnicodeChar"})):"x"==t?(g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),n=s.exec(this.regex.substr(this.pos-1)),this.pos+=n[0].length-1,o.push({part:n[0],flags:{Char:String.fromCharCode(parseInt(n[1],16)),Code:n[1]},type:"HexChar"})):h[t]&&"/"!=t?(g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),i={},i[h[t]]=1,o.push({part:t,flags:i,type:"Special"})):g+=t;else if("|"==t)g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),l.push({part:o,flags:{},type:"Sequence"}),o=[];else if("["==t)g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),o.push(this.chargroup());else if("("==t)g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),o.push(this.subgroup());else if("{"==t){g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),n=r.exec(this.regex.substr(this.pos-1)),this.pos+=n[0].length-1,i={part:n[0],MatchMinimum:n[1],MatchMaximum:n[2]||"unlimited"},i[p[t]]=1,"?"==this.regex.charAt(this.pos)?(i.isGreedy=0,this.pos++):i.isGreedy=1;var f=o.pop();"String"==f.type&&f.part.length>1&&(o.push({part:f.part.slice(0,-1),flags:{},type:"String"}),f.part=f.part.slice(-1)),o.push({part:f,flags:i,type:"Quantifier"})}else if("*"==t||"+"==t||"?"==t){g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),i={},i[p[t]]=1,"?"==this.regex.charAt(this.pos)?(i.isGreedy=0,this.pos++):i.isGreedy=1;var f=o.pop();"String"==f.type&&f.part.length>1&&(o.push({part:f.part.slice(0,-1),flags:{},type:"String"}),f.part=f.part.slice(-1)),o.push({part:f,flags:i,type:"Quantifier"})}else p[t]?(g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),i={},i[p[t]]=1,o.push({part:t,flags:i,type:"Special"})):g+=t;return g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),l.length?(l.push({part:o,flags:{},type:"Sequence"}),o=[],i={},i[p["|"]]=1,this.parts={part:l,flags:i,type:"Alternation"}):this.parts={part:o,flags:{},type:"Sequence"},this},subgroup:function(){var t,i,n,g="",l=[],o=[],u={},f=!1,c=this.regex.substr(this.pos,2);for("?:"==c?(u.NotCaptured=1,this.pos+=2):"?="==c?(u.LookAhead=1,this.pos+=2):"?!"==c&&(u.NegativeLookAhead=1,this.pos+=2),u.GroupIndex=++this.groupIndex;this.pos<this.regex.length;)if(t=this.regex.charAt(this.pos++),f=e==t?!0:!1,f&&(t=this.regex.charAt(this.pos++)),f)"u"==t?(g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),n=a.exec(this.regex.substr(this.pos-1)),this.pos+=n[0].length-1,o.push({part:n[0],flags:{Char:String.fromCharCode(parseInt(n[1],16)),Code:n[1]},type:"UnicodeChar"})):"x"==t?(g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),n=s.exec(this.regex.substr(this.pos-1)),this.pos+=n[0].length-1,o.push({part:n[0],flags:{Char:String.fromCharCode(parseInt(n[1],16)),Code:n[1]},type:"HexChar"})):h[t]&&"/"!=t?(g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),i={},i[h[t]]=1,o.push({part:t,flags:i,type:"Special"})):g+=t;else{if(")"==t)return g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),l.length?(l.push({part:o,flags:{},type:"Sequence"}),o=[],i={},i[p["|"]]=1,{part:{part:l,flags:i,type:"Alternation"},flags:u,type:"Group"}):{part:{part:o,flags:{},type:"Sequence"},flags:u,type:"Group"};if("|"==t)g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),l.push({part:o,flags:{},type:"Sequence"}),o=[];else if("["==t)g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),o.push(this.chargroup());else if("("==t)g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),o.push(this.subgroup());else if("{"==t){g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),n=r.exec(this.regex.substr(this.pos-1)),this.pos+=n[0].length-1,i={part:n[0],MatchMinimum:n[1],MatchMaximum:n[2]||"unlimited"},i[p[t]]=1,"?"==this.regex.charAt(this.pos)?(i.isGreedy=0,this.pos++):i.isGreedy=1;var y=o.pop();"String"==y.type&&y.part.length>1&&(o.push({part:y.part.slice(0,-1),flags:{},type:"String"}),y.part=y.part.slice(-1)),o.push({part:y,flags:i,type:"Quantifier"})}else if("*"==t||"+"==t||"?"==t){g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),i={},i[p[t]]=1,"?"==this.regex.charAt(this.pos)?(i.isGreedy=0,this.pos++):i.isGreedy=1;var y=o.pop();"String"==y.type&&y.part.length>1&&(o.push({part:y.part.slice(0,-1),flags:{},type:"String"}),y.part=y.part.slice(-1)),o.push({part:y,flags:i,type:"Quantifier"})}else p[t]?(g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),i={},i[p[t]]=1,o.push({part:t,flags:i,type:"Special"})):g+=t}return g.length&&(o.push({part:g,flags:{},type:"String"}),g=""),l.length?(l.push({part:o,flags:{},type:"Sequence"}),o=[],i={},i[p["|"]]=1,{part:{part:l,flags:i,type:"Alternation"},flags:u,type:"Group"}):{part:{part:o,flags:{},type:"Sequence"},flags:u,type:"Group"}},chargroup:function(){var t,r,p,i,n,g,l=[],o=[],u={},f=!1,c=!1;for("^"==this.regex.charAt(this.pos)&&(u.NotMatch=1,this.pos++);this.pos<this.regex.length;)if(g=!1,p=r,r=this.regex.charAt(this.pos++),c=e==r?!0:!1,c&&(r=this.regex.charAt(this.pos++)),c&&("u"==r?(n=a.exec(this.regex.substr(this.pos-1)),this.pos+=n[0].length-1,r=String.fromCharCode(parseInt(n[1],16)),g=!0):"x"==r&&(n=s.exec(this.regex.substr(this.pos-1)),this.pos+=n[0].length-1,r=String.fromCharCode(parseInt(n[1],16)),g=!0)),f)o.length&&(l.push({part:o,flags:{},type:"Chars"}),o=[]),i[1]=r,f=!1,l.push({part:i,flags:{},type:"CharRange"});else if(c)!g&&h[r]&&"/"!=r?(o.length&&(l.push({part:o,flags:{},type:"Chars"}),o=[]),t={},t[h[r]]=1,l.push({part:r,flags:t,type:"Special"})):o.push(r);else{if("]"==r)return o.length&&(l.push({part:o,flags:{},type:"Chars"}),o=[]),{part:l,flags:u,type:"CharGroup"};"-"==r?(i=[p,""],o.pop(),f=!0):o.push(r)}return o.length&&(l.push({part:o,flags:{},type:"Chars"}),o=[]),{part:l,flags:u,type:"CharGroup"}}},t.RegExAnalyzer=o}(t),t.RegExAnalyzer});
/**
*
*   AceGrammar
*   @version: 0.8.4
*
*   Transform a grammar specification in JSON format, into an ACE syntax-highlight parser mode
*   https://github.com/foo123/ace-grammar
*
**/!function(e,t,n,r){"use strict";function o(e,t,n,r,o){var l;return e?{file:__filename,path:__dirname}:t?{file:l=self.location.href,path:l.split("/").slice(0,-1).join("/")}:n&&o&&o.uri?{file:l=o.uri,path:l.split("/").slice(0,-1).join("/")}:r&&(l=document.getElementsByTagName("script"))&&l.length?{file:l=l[l.length-1].src,path:l.split("/").slice(0,-1).join("/")}:{file:null,path:null}}function l(e,t,n,r,o){var l,i=e.length,s=new Array(i);for(l=0;i>l;l++)s[l]=1===r?n[e[l]]||o(t[l]):2===r?o(e[l]):n[e[l]];return s}function i(e,t,n,r,o,l){var i,s,u,a,c,f,p,h=n.length;if(l){for(i=0;h>i;i++)n[i]in e||importScripts(t+r[i]);return o()}f=document.getElementsByTagName("head")[0],p=document.createElement("a"),s=/^\./,u=0,i=0,a=function(e,n){var r=0,o=document.createElement("script");o.type="text/javascript",o.language="javascript",o.onload=o.onreadystatechange=function(){r||o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(r=1,o.onload=o.onreadystatechange=null,n(),f.removeChild(o),o=null)},s.test(e)&&(p.href=t+e,e=p.protocol+"//"+p.host+p.pathname+p.search+p.hash),o.src=e,f.appendChild(o)},c=function(){n[i]in e?++i>=h?o():n[i]in e?c():a(r[i],c):++u<30?setTimeout(c,30):(u=0,i++,c())};for(;h>i&&n[i]in e;)i++;h>i?a(r[i],c):o()}n=n||[[],[]];var s,u,a,c="undefined"!=typeof global&&"[object global]"==={}.toString.call(global),f=!c&&"undefined"!=typeof navigator,p=!c&&"function"==typeof importScripts&&navigator instanceof WorkerNavigator,h="function"==typeof define&&define.amd,g=c&&"object"==typeof module&&module.exports,m=p?self:e,d=o(c,p,h,f),k=[].concat(n[0]),v=[].concat(n[1]),E=k.length,w=/\.js$/i;if(g)module.$deps=module.$deps||{},module.exports=module.$deps[t]=r.apply(e,[{NODE:module}].concat(l(k,v,module.$deps,1,require)))||1;else if(h&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)){if(!require.defined(t)){for(a={},u=0;E>u;u++)require.specified(k[u])||(a[k[u]]=v[u].replace(w,""));require.config({paths:a}),define(t,["require","exports","module"].concat(k),function(t,n,o){return r.apply(e,[{AMD:o}].concat(l(k,v,arguments,2,t)))})}}else t in m||i(m,d.path+"/",k,v,function(){m[t]=s=r.apply(e,[{}].concat(l(k,v,m)))||1,h&&define(t,["require"],function(){return s})},p)}(this,"AceGrammar",[["Classy","RegExAnalyzer"],["./classy.js","./regexanalyzer.js"]],function(e,t,n){function r(){ace.define("ace/grammar_worker",["require","exports","module","ace/worker/mirror"],function(e,t){t.AceGrammarWorker=P(e("./worker/mirror").Mirror,{constructor:function(e){var t=this;t.$superv("constructor",[e]),t.setTimeout(500)},parser:null,Init:function(e,t){var n=this;n.parser=new Pt(Dt(e),{DEFAULT:o,ERROR:s}),n.sender.callback(1,t)},onUpdate:function(){var e,t,n,r,o,l,i,s,u,a=this,c=a.sender,f=a.parser,p=0;if(!f)return void c.emit("ok",null);if(e=a.doc.getValue(),!e||!e.length)return void c.emit("ok",null);for(r=[],t=f.parse(e),l=t.length,o=0;l>o;o++)if(n=t[o],n&&n.length)for(u=0,i=0;i<n.length;i++)s=n[i],f.ERR==s.type&&(r.push({row:o,column:u,text:s.error||"Syntax Error",type:"error",raw:s.error||"Syntax Error"}),p=1),u+=s.value.length;p?c.emit("error",r):c.emit("ok",null)}})})}var o,s,u=1/0,a=2,c=8,f=9,p=10,h=16,g=32,m=128,d=256,k=2,v=4,E=8,w=16,R=17,y=18,C=20,_=32,b=33,T=34,x=64,S=128,L=256,M=257,A=258,I=259,B=512,D=1024,O=2048,$=4096,j={EITHER:x,ALL:S,ZEROORONE:M,ZEROORMORE:A,ONEORMORE:I,REPEATED:L},N={INDENT:O,DEDENT:$,BLOCK:_,COMMENT:T,ESCAPEDBLOCK:b,SIMPLE:w,GROUP:B,NGRAM:D},P=t.Class,Q=Array.prototype,H=Object.prototype,q=Function.prototype,U=q.call.bind(Q.slice),K=Q.concat,V=q.call.bind(H.hasOwnProperty),G=(q.call.bind(H.toString),q.call.bind(H.propertyIsEnumerable)),z=Object.keys,F=t.Type,W=function(e,t){return t||h!=F(e)?[e]:e},Z=function(e,t){return e=W(e,t),(t||h!=F(e[0]))&&(e=[e]),e},Y=function(e){var t,n=F(e);if(!((g|h)&n))return e;var r,o={};for(r in e)V(e,r)&&G(e,r)&&(t=F(e[r]),o[r]=g&t?Y(e[r]):h&t?e[r].slice():e[r]);return o},J=function(){var e=U(arguments),t=e.length;if(1>t)return null;if(2>t)return Y(e[0]);var n,r,o,l,i=e.shift(),s=Y(i);for(t--,r=0;t>r;r++)if(n=e.shift())for(o in n)V(n,o)&&G(n,o)&&(V(i,o)&&G(i,o)?(l=F(i[o]),g&~c&l&&(s[o]=J(i[o],n[o]))):s[o]=Y(n[o]));return s},X=function(e){return e.replace(/([.*+?^${}()|[\]\/\\\-])/g,"\\$1")},et=function(e,t){var n,r,o,l;for(l=function(e,n){return t[1+parseInt(n,10)]},n=e.split("$$"),o=n.length,r=0;o>r;r++)n[r]=n[r].replace(/\$(\d{1,2})/g,l);return n.join("$")},tt=function(e,t){return t.length-e.length},nt=function(e,t){return c&F(t)&&c&F(e)&&t.length&&t.length<=e.length&&t==e.substr(0,t.length)},rt=function(e,t,r){if(!e||a==F(e))return e;var o,l=t?t.length||0:0;if(l&&t==e.substr(0,l)){var i,s,u,c,f,o,p,h=e.substr(l),g=h[0],m="";for(o=h.length;o--&&(p=h[o],g!=p);)"i"==p.toLowerCase()&&(m="i");return i=h.substring(1,o),s="^("+i+")",r[s]||(u=new RegExp(s,m),f=new n(u).analyze(),c=f.getPeekChars(),z(c.peek).length||(c.peek=null),z(c.negativepeek).length||(c.negativepeek=null),r[s]=[u,c]),r[s]}return e},ot=function(e,t){var n={},r="",o=F(t);(c==o||f==o)&&(r=t);var l=e.sort(tt).map(function(e){return n[e.charAt(0)]=1,X(e)}).join("|");return[new RegExp("^("+l+")"+r),{peek:n,negativepeek:null},1]},lt=0,it=function(){return++lt},st="undefined"!=typeof global&&"[object global]"=={}.toString.call(global)?1:0,ut=st||"undefined"==typeof navigator?0:1,at="function"==typeof importScripts&&navigator instanceof WorkerNavigator?1:0,ct=function(){var e,t,n=null;return st?(n=__filename,{path:__dirname,file:__filename,base:__dirname}):(at?n=self.location.href:ut&&(e=document.location.href.split("#")[0].split("?")[0].split("/").slice(0,-1).join("/"),(t=document.getElementsByTagName("script"))&&t.length&&(n=t[t.length-1].src)),n?{path:n.split("/").slice(0,-1).join("/"),file:n,base:e}:{path:null,file:null,base:null})},ft=ct(),pt=Math.max,ht=/^[\s\u00a0]+/,gt=/[^\s\u00a0]/,mt=function(e,t,n,r,o){var l,i;for(null===t&&(t=e.search(gt),-1==t&&(t=e.length)),l=r||0,i=o||0;t>l;++l)i+="	"==e.charAt(l)?n-i%n:1;return i},dt=P({constructor:function(e){var t=this;t._=null,t.s=e?""+e:"",t.start=t.pos=0,t.lCP=t.lCV=0,t.lS=0},_:null,s:"",start:0,pos:0,lCP:0,lCV:0,lS:0,toString:function(){return this.s},fromStream:function(e){var t=this;return t._=e,t.s=""+e.string,t.start=e.start,t.pos=e.pos,t.lCP=e.lastColumnPos,t.lCV=e.lastColumnValue,t.lS=e.lineStart,t},sol:function(){return 0==this.pos},eol:function(){return this.pos>=this.s.length},chr:function(e,t){var n=this,r=n.s.charAt(n.pos)||null;return r&&e==r?(!1!==t&&(n.pos+=1,n._&&(n._.pos=n.pos)),r):!1},chl:function(e,t){var n=this,r=n.s.charAt(n.pos)||null;return r&&-1<e.indexOf(r)?(!1!==t&&(n.pos+=1,n._&&(n._.pos=n.pos)),r):!1},str:function(e,t,n){var r,o=this,l=o.pos,i=o.s,s=i.charAt(l)||null;return s&&t[s]&&(r=e.length,e==i.substr(l,r))?(!1!==n&&(o.pos+=r,o._&&(o._.pos=o.pos)),e):!1},rex:function(e,t,n,r,o){var l,i=this,s=i.pos,u=i.s,a=u.charAt(s)||null;return a&&t&&t[a]||n&&!n[a]?(l=u.slice(s).match(e),!l||l.index>0?!1:(!1!==o&&(i.pos+=l[r||0].length,i._&&(i._.pos=i.pos)),l)):!1},spc:function(e){var t,n=this,r=n.pos,o=n.s.slice(r);return(t=o.match(ht))?(!1!==e&&(n.pos+=t[0].length,n._&&(n._.pos=n.pos)),1):0},end:function(){var e=this;return e.pos=e.s.length,e._&&(e._.pos=e.pos),e},nxt:function(){var e,t=this,n=t.s;return t.pos<n.length?(e=n.charAt(t.pos++)||null,t._&&(t._.pos=t.pos),e):void 0},bck:function(e){var t=this;return t.pos=pt(0,t.pos-e),t._&&(t._.pos=t.pos),t},bck2:function(e){var t=this;return t.pos=pt(0,e),t._&&(t._.pos=t.pos),t},col:function(e){var t=this;return e=e||1,t.lCP<t.start&&(t.lCV=mt(t.s,t.start,e,t.lCP,t.lCV),t.lCP=t.start,t._&&(t._.start=t.start,t._.lastColumnPos=t.lCP,t._.lastColumnValue=t.lCV,t._.lineStart=t.lS)),t.lCV-(t.lS?mt(t.s,t.lS,e):0)},ind:function(e){var t=this;return e=e||1,mt(t.s,null,e)-(t.lS?mt(t.s,t.lS,e):0)},cur:function(e){var t=this,n=t.s.slice(t.start,t.pos);return e&&(t.start=t.pos),n},sft:function(){return this.start=this.pos,this}}),kt=P({constructor:function(e){this._=e||[]},_:null,toString:function(){var e=this._.slice();return e.reverse().join("\n")},clone:function(){return new this.$class(this._.slice())},isEmpty:function(){return 0>=this._.length},pos:function(){return this._.length},peek:function(e){var t=this._;if(e="undefined"==typeof e?-1:e,t.length){if(0>e&&0<=t.length+e)return t[t.length+e];if(e>=0&&e<t.length)return t[e]}return null},pop:function(){return this._.pop()},shift:function(){return this._.shift()},push:function(e){return this._.push(e),this},unshift:function(e){return this._.unshift(e),this},pushAt:function(e,t,n,r){var o=this._;return n&&r&&(t[n]=r),e<o.length?o.splice(e,0,t):o.push(t),this},empty:function(e,t){{var n=this._;n.length}if(e&&t)for(;n.length&&n[n.length-1]&&n[n.length-1][e]==t;)n.pop();else n.length=0;return this}}),vt=P({constructor:function(e,t){var n=this;n.id=t?(new Date).getTime():0,n.l=e||0,n.stack=new kt,n.data=new kt,n.col=0,n.indent=0,n.t=null,n.inBlock=null,n.endBlock=null},id:0,l:0,col:0,indent:0,stack:null,data:null,t:null,inBlock:null,endBlock:null,clone:function(e){var t=this,n=new t.$class(t.l,e);return n.t=t.t,n.col=t.col,n.indent=t.indent,n.stack=t.stack.clone(),n.data=t.data.clone(),n.inBlock=t.inBlock,n.endBlock=t.endBlock,n},toString:function(){var e=this;return["",e.id,e.l,e.t,e.inBlock||"0"].join("_")}}),Et=P({constructor:function(e,t,n,r){var o=this;switch(o.type=k,o.tt=e||f,o.tn=t,o.tk=r||0,o.tg=0,o.tp=null,o.p=null,o.np=null,o.tt){case f:case p:o.tp=n;break;case c:o.tp=n,o.p={},o.p[""+n.charAt(0)]=1;break;case m:o.tp=n[0],o.p=n[1].peek||null,o.np=n[1].negativepeek||null,o.tg=n[2]||0;break;case d:o.tp=null}},type:null,tt:null,tn:null,tp:null,tg:0,tk:0,p:null,np:null,get:function(e,t){var n,r=this,o=r.tt,l=r.tk,i=r.tp,s=r.tg,u=r.p,a=r.np;switch(o){case f:if(n=e.chr(i,t))return[l,n];break;case p:if(n=e.chl(i,t))return[l,n];break;case c:if(n=e.str(i,u,t))return[l,n];break;case m:if(n=e.rex(i,u,a,s,t))return[l,n];break;case d:return!1!==t&&e.end(),[l,""]}return!1},toString:function(){return["[","Matcher: ",this.tn,", Pattern: ",this.tp?this.tp.toString():null,"]"].join("")}}),wt=P(Et,{constructor:function(e,t,n){var r=this;r.type=v,r.tn=e,r.ms=t,r.ownKey=!1!==n},ms:null,ownKey:!0,get:function(e,t){var n,r,o=this.ms,l=o.length,i=this.ownKey;for(n=0;l>n;n++)if(r=o[n].get(e,t))return i?[n,r[1]]:r;return!1}}),Rt=P(Et,{constructor:function(e,t,n){var r=this;r.type=E,r.tn=e,r.s=new wt(r.tn+"_Start",t,!1),r.e=n},s:null,e:null,get:function(e,t){var n,r=this,o=r.s,l=r.e;if(n=o.get(e,t)){var i,s=l[n[0]],u=F(s),p=o.ms[n[0]].tt;return m==p&&(a==u?(i=n[1][s+1],s=new Et(i.length>1?c:f,r.tn+"_End",i)):c==u&&(i=et(s,n[1]),s=new Et(i.length>1?c:f,r.tn+"_End",i))),s}return!1}}),yt=function(e,t,n,r){var o=F(t);if(a==o)return t;if(!r[e]){n=n||0;var l,i=0;t&&t.isCharList&&(i=1,delete t.isCharList),l=d&o?new Et(d,e,t,n):f==o?new Et(f,e,t,n):c&o?i?new Et(p,e,t,n):new Et(c,e,t,n):h&o?new Et(m,e,t,n):t,r[e]=l}return r[e]},Ct=function(e,t,n,r,o,l){if(!l[e]){var i,s,u,a,p,g,m,d=0,k=0,v=1;if(i=W(t),u=i.length,1==u)m=yt(e,rt(i[0],n,o),0,l);else if(u>1){for(a=(u>>1)+1,s=0;a>=s;s++)p=F(i[s]),g=F(i[u-1-s]),(f!=p||f!=g)&&(v=0),h&p||h&g?d=1:(nt(i[s],n)||nt(i[u-1-s],n))&&(k=1);if(!v||r&&c&F(r))if(!r||d||k){for(s=0;u>s;s++)i[s]=h&F(i[s])?Ct(e+"_"+s,i[s],n,r,o,l):yt(e+"_"+s,rt(i[s],n,o),s,l);m=u>1?new wt(e,i):i[0]}else m=yt(e,ot(i,r),0,l);else i=i.slice().join(""),i.isCharList=1,m=yt(e,i,0,l)}l[e]=m}return l[e]},_t=function(e,t,n,r,o){if(!o[e]){var l,i,s,u,a,f,p;for(u=[],a=[],l=Z(t),i=0,s=l.length;s>i;i++)f=yt(e+"_0_"+i,rt(l[i][0],n,r),i,o),p=l[i].length>1?m!=f.tt||c!=F(l[i][1])||nt(l[i][1],n)?yt(e+"_1_"+i,rt(l[i][1],n,r),i,o):l[i][1]:f,u.push(f),a.push(p);o[e]=new Rt(e,u,a)}return o[e]},bt=P({constructor:function(e,t,n){var r=this;r.tt=e||w,r.id=t,r.tk=n,r.REQ=0,r.ERR=0,r.MTCH=0,r.CLONE=["tk"]},sID:null,id:null,tt:null,tk:null,tm:null,REQ:0,ERR:0,MTCH:0,CLONE:null,m:function(e,t){var n,r,o=this.tm||null,l=t.data;if(o)if(n=o[1],"push"==o[0]&&n)e&&(r=F(n),n=a==r?e[1][n]:et(n,e[1])),l.push(n);else if("pop"==o[0])if(n){if(e&&(r=F(n),n=a==r?e[1][n]:et(n,e[1])),l.isEmpty()||n!=l.peek())return n;l.pop()}else l.length&&l.pop();return 0},get:function(e,t){var n=this,r=n.tm,o=n.tk,l=n.tt,i=n.id,s=null;if(n.MTCH=0,C==l)return n.ERR=0,n.REQ=0,!0;if(R==l){if(e.spc(),e.eol())return i}else if(y==l)n.ERR=n.REQ&&e.spc()&&!e.eol()?1:0,n.REQ=0;else if(s=o.get(e))return r&&(n.MTCH=n.m(s,t)),i;return!1},req:function(e){return this.REQ=e?1:0,this},err:function(){var e=this;return e.REQ?'Token "'+e.id+'" Expected':e.MTCH?'Token "'+e.MTCH+'" No Match':'Syntax Error: "'+e.id+'"'},clone:function(){var e,t,n,r=this,o=r.CLONE;if(e=new r.$class,e.tt=r.tt,e.id=r.id,e.tm=r.tm?r.tm.slice():r.tm,o&&o.length)for(t=0,n=o.length;n>t;t++)e[o[t]]=r[o[t]];return e},toString:function(){return["[","Tokenizer: ",this.id,", Matcher: ",this.tk?this.tk.toString():null,"]"].join("")}}),Tt=P(bt,{constructor:function(e,t,n,r,o,l){var i=this;i.$superv("constructor",[e,t,n]),i.mline="undefined"==typeof r?1:r,i.esc=o||"\\",i.inter=l,i.CLONE=["tk","mline","esc","inter"]},inter:0,mline:0,esc:null,get:function(e,t){var n,r,o,l,i,s,u,a,c,f=this,p=0,h=0,g="",m=f.mline,k=f.tk,v=f.id,E=f.tt,w=f.inter,R=w?v+".inside":v,y=0,C=b==E,_=f.esc;if(T==E&&(f.REQ=0),i=0,t.inBlock==v?(h=1,n=t.endBlock,i=1,s=R):!t.inBlock&&(n=k.get(e))&&(h=1,t.inBlock=v,t.endBlock=n,s=v),h){if(o=t.stack.pos(),l=d==n.tt,w){if(i&&l&&e.sol())return f.REQ=0,t.inBlock=null,t.endBlock=null,!1;if(!i)return t.stack.pushAt(o,f.clone(),"sID",v),s}if(p=n.get(e),r=m,c=0,p)s=l?R:v;else for(a=e.pos;!e.eol();){if(u=e.pos,!(C&&y||!n.get(e))){w&&e.pos>u&&u>a?(s=R,e.bck2(u),c=1):(s=v,p=1);break}g=e.nxt(),y=!y&&g==_}return r=m||C&&y,p||!r&&!c?(t.inBlock=null,t.endBlock=null):t.stack.pushAt(o,f.clone(),"sID",v),s}return!1}}),xt=P(bt,{constructor:function(e,t,n,r,o){var l=this;l.tt=e||L,l.id=t||null,l.tk=null,l.ts=null,l.min=r||0,l.max=o||u,l.found=0,l.CLONE=["ts","min","max","found"],n&&l.set(n)},ts:null,min:0,max:1,found:0,set:function(e){return e&&(this.ts=W(e)),this},get:function(e,t){var n,r,o,l,i,s,u=this,a=u.ts,c=a.length,f=u.found,p=u.min,h=u.max,g=0;for(u.ERR=0,u.REQ=0,u.MTCH=0,l=e.pos,i=t.stack.pos(),s=u.id+"_"+it(),n=0;c>n;n++){if(r=a[n].clone().req(1),o=r.get(e,t),!1!==o){if(++f,h>=f)return u.found=f,t.stack.pushAt(i,u.clone(),"sID",s),u.found=0,u.MTCH=r.MTCH,o;break}r.REQ&&g++,r.ERR&&e.bck2(l)}return u.REQ=p>f,u.ERR=f>h||p>f&&g>0,!1}}),St=P(xt,{constructor:function(e,t,n){this.$superv("constructor",[e,t,n,1,1])},get:function(e,t){var n,r,o,l,i=this,s=i.ts,u=s.length,a=0,c=0;for(i.REQ=1,i.ERR=0,i.MTCH=0,l=e.pos,o=0;u>o;o++){if(r=s[o].clone().req(1),n=r.get(e,t),a+=r.REQ?1:0,!1!==n)return i.MTCH=r.MTCH,n;r.ERR&&(c++,e.bck2(l))}return i.REQ=a>0,i.ERR=u==c&&a>0,!1}}),Lt=P(xt,{constructor:function(e,t,n){this.$superv("constructor",[e,t,n,1,1])},get:function(e,t){var n,r,o,l,i,s=this,u=s.ts,a=u.length;if(s.REQ=1,s.ERR=0,s.MTCH=0,o=e.pos,l=t.stack.pos(),n=u[0].clone().req(1),r=n.get(e,t),i=s.id+"_"+it(),!1!==r){if(!0!==r)for(var c=a-1;c>0;c--)t.stack.pushAt(l+a-c-1,u[c].clone().req(1),"sID",i);return s.MTCH=n.MTCH,r}return n.ERR?(s.ERR=1,e.bck2(o)):n.REQ&&(s.ERR=1),!1}}),Mt=P(xt,{constructor:function(e,t,n){this.$superv("constructor",[e,t,n,1,1])},get:function(e,t){var n,r,o,l,i,s,u=this,a=u.ts,c=a.length;if(u.REQ=0,u.ERR=0,u.MTCH=0,o=e.pos,l=t.stack.pos(),n=a[0].clone().req(0),r=n.get(e,t),i=u.id+"_"+it(),!1!==r){if(!0!==r)for(s=c-1;s>0;s--)t.stack.pushAt(l+c-s-1,a[s].clone().req(1),"sID",i);return u.MTCH=n.MTCH,r}return n.ERR&&e.bck2(o),!1}}),At=function(e,t,n,r,o,l,i,s,a,f,p){var g,m,d,k,v,E,b,O,$,P,Q,H,q,U=null;if(null===e)return new bt(R,"EOL",e);if(""===e)return new bt(y,"NONSPACE",e);if(!1===e||0===e)return new bt(C,"EMPTY",e);if(e=""+e,!s[e]&&(g=n[e]||r[e]||{type:"simple",tokens:e})){for((c|h)&F(g)&&(g={type:"simple",tokens:g});g.extend;){var K=g.extend,V=n[K]||r[K];delete g.extend,V&&((c|h)&F(V)&&(V={type:"simple",tokens:V}),g=J(V,g))}if(m=g.type?N[g.type.toUpperCase().replace("-","").replace("_","")]:w,w&m){if(""===g.tokens)return U=new bt(y,e,e),s[e]=U,U;if(null===g.tokens)return U=new bt(R,e,e),s[e]=U,U;if(!1===g.tokens||0===g.tokens)return U=new bt(C,e,e),s[e]=U,U}if(g.tokens=W(g.tokens),w&m)g.autocomplete&&Bt(g,e,p),k=null,g.push?k=["push",g.push]:"undefined"!=typeof g.pop&&(k=["pop",g.pop]),d="undefined"==typeof g.combine?"\\b":g.combine,U=new bt(w,e,Ct(e,g.tokens.slice(),t,d,l,i)),U.tm=k,s[e]=U;else if(_&m)T&m&&It(g,f),U=new Tt(m,e,_t(e,g.tokens.slice(),t,l,i),g.multiline,g.escape,o[e+".inside"]?1:0),s[e]=U,g.interleave&&a.push(U.clone());else if(B&m){for(E=g.tokens.slice(),h&F(g.match)?U=new xt(L,e,null,g.match[0],g.match[1]):(v=j[g.match.toUpperCase()],U=M==v?new xt(M,e,null,0,1):A==v?new xt(A,e,null,0,u):I==v?new xt(I,e,null,1,u):x&v?new St(x,e,null):new Lt(S,e,null)),s[e]=U,b=[],P=0,Q=E.length;Q>P;P++)b=b.concat(At(E[P],t,n,r,o,l,i,s,a,f,p));U.set(b)}else if(D&m){for(U=Z(g.tokens.slice()).slice(),O=[],P=0,Q=U.length;Q>P;P++)O[P]=U[P].slice(),U[P]=new Mt(D,e+"_NGRAM_"+P,null);for(s[e]=U,P=0,Q=U.length;Q>P;P++){for($=O[P],b=[],H=0,q=$.length;q>H;H++)b=b.concat(At($[H],t,n,r,o,l,i,s,a,f,p));U[P].set(b)}}}return s[e]},It=function(e,t){var n,r,o,s=Z(e.tokens.slice());for(i=0,l=s.length;l>i;i++)n=s[i][0],r=s[i].length>1?s[i][1]:s[i][0],o=s[i].length>2?s[i][2]:"",null===r?(t.line=t.line||[],t.line.push(n)):(t.block=t.block||[],t.block.push([n,r,o]))},Bt=function(e,t,n){var r=[].concat(W(e.tokens)).map(function(e){return{word:e,meta:t}});n.autocomplete=K.apply(n.autocomplete||[],r)},Dt=function(e){var t,n,r,o,l,i,s,u,a,c,f,p,g,m,d,k;if(e.__parsed)return e;for(f={},p={},g={},d={},k={},m=[],e=Y(e),t=e.RegExpID||null,e.RegExpID=null,delete e.RegExpID,i=e.Lex||{},e.Lex=null,delete e.Lex,s=e.Syntax||{},e.Syntax=null,delete e.Syntax,l=e.Style||{},o=e.Parser||[],r=o.length,n=[],u=0;r>u;u++)a=o[u],c=At(a,t,i,s,l,f,p,g,m,d,k)||null,c&&(h&F(c)?n=n.concat(c):n.push(c));return e.Parser=n,e.cTokens=m,e.Style=l,e.Comments=d,e.Keywords=k,e.Extra=e.Extra||{},e.__parsed=1,e},Ot="undefined"!=typeof ace?ace:{require:function(){return{}},config:{}},$t=Ot.require,jt=Ot.config,Nt=P($t("ace/worker/worker_client").WorkerClient,{constructor:function(e,t,n){var r=this,o=$t,l=jt;r.$sendDeltaQueue=r.$sendDeltaQueue.bind(r),r.changeListener=r.changeListener.bind(r),r.onMessage=r.onMessage.bind(r),o.nameToUrl&&!o.toUrl&&(o.toUrl=o.nameToUrl);var i;if(l.get("packaged")||!o.toUrl)i=l.moduleUrl(t,"worker");else{var s=r.$normalizePath;i=s(o.toUrl("ace/worker/worker.js",null,"_"));var u={};e.forEach(function(e){u[e]=s(o.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}r.$worker=new Worker(i),r.$worker.postMessage({load:!0,ace_worker_base:ft.base+"/"+jt.moduleUrl("ace/worker/json")}),r.$worker.postMessage({init:!0,tlns:u,module:t,classname:n}),r.callbackId=1,r.callbacks={},r.$worker.onmessage=r.onMessage}}),Pt=P($t("ace/tokenizer").Tokenizer,{constructor:function(e,t){var n,r=this;r.LC=e.Comments.line||null,r.BC=e.Comments.block?{start:e.Comments.block[0][0],end:e.Comments.block[0][1]}:null,r.LC&&(n=h&F(r.LC)?r.LC.map(X).join("|"):X(r.LC),r.rxLine=new RegExp("^(\\s*)(?:"+n+") ?")),r.BC&&(r.rxStart=new RegExp("^(\\s*)(?:"+X(r.BC.start)+")"),r.rxEnd=new RegExp("(?:"+X(r.BC.end)+")\\s*$")),r.DEF=t.DEFAULT,r.ERR=e.Style.error||t.ERROR,r.Keywords=e.Keywords.autocomplete||null,r.Tokens=e.Parser||[],r.cTokens=e.cTokens.length?e.cTokens:null,r.Style=e.Style},ERR:null,DEF:null,LC:null,BC:null,rxLine:null,rxStart:null,rxEnd:null,Keywords:null,cTokens:null,Tokens:null,Style:null,parse:function(e){e=e||"";var t,n,r=e.split(/\r\n|\r|\n/g),o=r.length,l=[];for(n={state:new vt,tokens:null},t=0;o>t;t++)n=this.getLineTokens(r[t],n.state,t),l.push(n.tokens);return l},getLineTokens:function(e,t,n){var r,o,l,i,s,u,a,c,f,p,h,g=this,m=g.cTokens,d=g.Tokens,k=d.length,v=null,E=g.DEF,w=g.ERR,C=g.Style;for(u=[],p=new dt(e),t=t?t.clone(1):new vt(1,1),t.l=1+n,h=t.stack,a={type:null,value:"",error:null},c=null,f=null,!h.isEmpty()&&R==h.peek().tt&&p.sol()&&h.pop();!p.eol();)if(o=0,f&&f!==a.type?(a.type&&u.push(a),a={type:f,value:p.cur(1),error:v},v=null):a.type&&(a.value+=p.cur(1)),f=!1,!h.isEmpty()&&y==h.peek().tt||!p.spc()){for(;!h.isEmpty()&&!p.eol();){if(m){for(i=0,l=0;i<m.length;)if(s=m[i++],t.t=c=s.get(p,t),!1!==c){f=C[c]||E,l=1;break}if(l){o=1;break}}if(s=h.pop(),t.t=c=s.get(p,t),!1!==c){if(!0!==c){f=C[c]||E,s.MTCH&&(h.empty("sID",s.sID),t.t=c=w,f=w,v=s.err()),o=1;break}}else{if(s.ERR||s.REQ){h.empty("sID",s.sID),p.nxt(),t.t=c=w,f=w,v=s.err(),o=1;break}f=!1}}if(!o){if(p.eol())break;for(r=0;k>r;r++)if(s=d[r],t.t=c=s.get(p,t),!1!==c){if(!0!==c){f=C[c]||E,s.MTCH&&(h.empty("sID",s.sID),t.t=c=w,f=w,v=s.err()),o=1;break}}else{if(s.ERR||s.REQ){h.empty("sID",s.sID),p.nxt(),t.t=c=w,f=w,v=s.err(),o=1;break}f=!1}if(!o){if(p.eol())break;p.nxt(),t.t=c=E,f=E}}}else t.t=c=E,f=E;return f&&f!==a.type?(a.type&&u.push(a),u.push({type:f,value:p.cur(1),error:v}),v=null):a.type&&(a.value+=p.cur(1),u.push(a)),a=null,{state:t,tokens:u}},tCL:function(e,t,n,r){function o(e){for(var t=n;r>=t;t++)e(c.getLine(t),t)}var l,i,s,u,a=this,c=t.doc,f=!0,p=!0,g=1/0,m=t.getTabSize(),d=!1;if(a.LC){var k,v=h==F(a.LC)?a.LC[0]:a.LC,E=a.rxLine,w=v+" ";d=t.getUseSoftTabs(),i=function(e,t){var n,r,o=e.match(E);o&&(n=o[1].length,r=o[0].length,u(e,n,r)||" "!=o[0][r-1]||r--,c.removeInLine(t,n,r))},l=function(e,t){(!f||/\S/.test(e))&&(u(e,g,g)?c.insertInLine({row:t,column:g},w):c.insertInLine({row:t,column:g},v))},s=function(e){return E.test(e)},u=function(e,t,n){for(var r=0;t--&&" "==e.charAt(t);)r++;if(r%m!=0)return!1;for(r=0;" "==e.charAt(n++);)r++;return m>2?r%m!=m-1:r%m==0}}else{if(!a.BC)return!1;var v=a.BC.start,R=a.BC.end,y=a.rxStart,C=a.rxEnd;l=function(e,t){s(e,t)||(!f||/\S/.test(e))&&(c.insertInLine({row:t,column:e.length},R),c.insertInLine({row:t,column:g},v))},i=function(e,t){var n;(n=e.match(C))&&c.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(y))&&c.removeInLine(t,n[1].length,n[0].length)},s=function(e,n){if(y.test(e))return!0;for(var r=t.getTokens(n),o=0;o<r.length;o++)if("comment"===r[o].type)return!0}}k=1/0,o(function(e,t){var n=e.search(/\S/);-1!==n?(g>n&&(g=n),p&&!s(e,t)&&(p=!1)):k>e.length&&(k=e.length)}),1/0==g&&(g=k,f=!1,p=!1),d&&g%m!=0&&(g=Math.floor(g/m)*m),o(p?i:l)},tBC:function(e,t,n,r){var o,l,i,s,u,a,c,f,p,h,g,m=this,d=$t("ace/token_iterator").TokenIterator,k=$t("ace/range").Range,v=m.BC;if(v){if(o=new d(t,r.row,r.column),l=o.getCurrentToken(),i=t.selection,s=i.toOrientedRange(),l&&/comment/.test(l.type)){for(;l&&/comment/.test(l.type);){if(p=l.value.indexOf(v.start),-1!=p){h=o.getCurrentTokenRow(),g=o.getCurrentTokenColumn()+p,c=new k(h,g,h,g+v.start.length);break}l=o.stepBackward()}for(o=new d(t,r.row,r.column),l=o.getCurrentToken();l&&/comment/.test(l.type);){if(p=l.value.indexOf(v.end),-1!=p){h=o.getCurrentTokenRow(),g=o.getCurrentTokenColumn()+p,f=new k(h,g,h,g+v.end.length);break}l=o.stepForward()}f&&t.remove(f),c&&(t.remove(c),u=c.start.row,a=-v.start.length)}else a=v.start.length,u=n.start.row,t.insert(n.end,v.end),t.insert(n.start,v.start);s.start.row==u&&(s.start.column+=a),s.end.row==u&&(s.end.column+=a),t.selection.fromOrientedRange(s)}},indent:function(e){return e.match(/^\s*/)[0]},getNextLineIndent:function(e,t){return t.match(/^\s*/)[0]}}),Qt=function(e,t){var n;return n={getTokenizer:function(){return e},supportGrammarAnnotations:0,createWorker:function(e){if(!n.supportGrammarAnnotations)return null;jt.setModuleUrl("ace/grammar_worker",ft.file);var r=new Nt(["ace"],"ace/grammar_worker","AceGrammarWorker");return r.attachToDocument(e.getDocument()),r.call("Init",[t],function(){r.on("error",function(t){e.setAnnotations(t.data)}),r.on("ok",function(){e.clearAnnotations()})}),r},transformAction:function(){},toggleCommentLines:function(t,n,r,o){return e.tCL(t,n,r,o)},toggleBlockComment:function(t,n,r,o){return e.tBC(t,n,r,o)},getNextLineIndent:function(t,n,r){return e.getNextLineIndent(t,n,r)},checkOutdent:function(){return!1},autoOutdent:function(){},getKeywords:function(){var t=e.Keywords;return t?t.map(function(e){var t=e.word,n=e.meta;return{name:t,value:t,score:1e3,meta:n}}):[]},getCompletions:function(t,n,r,o){var l=e.Keywords;if(!l)return[];var i=o.length;return l.map(function(e){var t=e.word,n=e.meta,r=t.length,l=r>=i&&o==t.substr(0,i);return{name:t,value:t,score:l?1e3-r:0,meta:n}})}}},Ht=function(e,t){var n={DEFAULT:t||o,ERROR:s};e=Y(e);var r=Dt(e);return Qt(new Pt(r,n),e)};if(at){var qt=this;onmessage=function(e){var t=e.data;t.load&&t.ace_worker_base&&(importScripts(t.ace_worker_base),r.call(qt))}}o="text",s="invalid";e.AceGrammar={VERSION:"0.8.4",extend:J,parse:Dt,getMode:Ht};return e.AceGrammar});
